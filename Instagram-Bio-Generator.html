<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InstaGen Pro - Advanced Instagram Bio Generator</title>
    <!-- Google AdMob Integration -->
    <meta name="google-adsense-account" content="ca-pub-XXXXXXXXXXXXXXXX">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #f09433;
            --secondary: #e6683c;
            --accent: #dc2743;
            --dark: #333;
            --light: #f8f9fa;
            --gray: #6c757d;
            --bg: #f5f7fa;
            --card-bg: #ffffff;
            --text: #333333;
        }
        
        .dark-mode {
            --primary: #ff8a00;
            --secondary: #e52e71;
            --accent: #b81d5d;
            --dark: #f8f9fa;
            --light: #212529;
            --gray: #adb5bd;
            --bg: #121212;
            --card-bg: #1e1e1e;
            --text: #f8f9fa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        header {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
        }
        
        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-weight: 300;
            opacity: 0.9;
        }
        
        .content {
            padding: 2rem;
        }
        
        /* Tool Description Section */
        .tool-description {
            background: rgba(220, 39, 67, 0.05);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0 2rem;
            border-left: 4px solid var(--accent);
        }
        
        .tool-description h3 {
            color: var(--accent);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .compatibility-badges {
            display: flex;
            gap: 1rem;
            margin-top: 1.2rem;
            flex-wrap: wrap;
        }
        
        .badge {
            background: rgba(0,0,0,0.05);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        /* Ad Containers */
        .ad-container {
            width: 100%;
            background: #f8f9fa;
            padding: 1rem;
            text-align: center;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px dashed #ccc;
            overflow: hidden;
        }
        
        .top-banner-ad {
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f1f1f1;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray);
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab.active {
            color: var(--accent);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s ease;
            background: var(--card-bg);
            color: var(--text);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .btn {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 39, 67, 0.3);
        }
        
        .btn i {
            margin-right: 0.5rem;
        }
        
        .btn-secondary {
            background: var(--gray);
            margin-left: 0.5rem;
        }
        
        .result-container {
            margin-top: 2rem;
            border: 1px solid var(--gray);
            border-radius: 8px;
            padding: 1.5rem;
            background: var(--bg);
        }
        
        .result-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--text);
            display: flex;
            align-items: center;
        }
        
        .result-title i {
            margin-right: 0.5rem;
            color: var(--accent);
        }
        
        .result-content {
            white-space: pre-line;
            line-height: 1.6;
        }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .copy-btn, .save-btn, .refresh-btn {
            background: var(--dark);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover, .save-btn:hover, .refresh-btn:hover {
            opacity: 0.9;
        }
        
        .copy-btn i, .save-btn i, .refresh-btn i {
            margin-right: 0.3rem;
        }
        
        .save-btn {
            background: var(--accent);
        }
        
        .refresh-btn {
            background: var(--primary);
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 1rem;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--accent);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .char-counter {
            text-align: right;
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.3rem;
        }
        
        .char-counter.warning {
            color: orange;
        }
        
        .char-counter.error {
            color: var(--accent);
        }
        
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .template-card {
            border: 1px solid var(--gray);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .template-card:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
        }
        
        .template-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent);
        }
        
        .template-content {
            font-size: 0.9rem;
            color: var(--text);
        }
        
        .saved-items-container {
            margin-top: 2rem;
        }
        
        .saved-item {
            border: 1px solid var(--gray);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .saved-item-content {
            flex: 1;
        }
        
        .saved-item-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        footer {
            text-align: center;
            margin-top: 2rem;
            color: var(--gray);
            font-size: 0.9rem;
            padding: 1rem;
            border-top: 1px solid var(--gray);
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }
            
            header {
                padding: 1.5rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                display: block;
                padding-bottom: 5px;
            }
            
            .tab {
                display: inline-block;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
            
            .top-banner-ad {
                height: 50px;
            }
            
            .compatibility-badges {
                gap: 0.5rem;
            }
            
            .badge {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Top Banner Ad Space -->
        <div class="ad-container top-banner-ad">
            <!-- Google AdMob Ad Unit -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <header>
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
            </button>
            <h1>InstaGen Pro</h1>
            <p class="subtitle">Advanced Instagram Bio Generator & Profile Toolkit</p>
        </header>
        
        <div class="content">
            <!-- Tool Description Section -->
            <div class="tool-description">
                <h3><i class="fas fa-info-circle"></i> About InstaGen Pro</h3>
                <p>InstaGen Pro is an AI-powered tool that helps you create perfect Instagram bios, find unique usernames, and generate relevant hashtags. Whether you're an influencer, business, or just personalizing your profile, our tool creates stylish, aesthetic bios tailored to your personality in seconds.</p>
                <p>With multiple style options, language support, and smart suggestions, you can craft the perfect Instagram presence that stands out from the crowd.</p>
                
                <div class="compatibility-badges">
                    <div class="badge"><i class="fas fa-mobile-alt"></i> Mobile Friendly</div>
                    <div class="badge"><i class="fas fa-tablet-alt"></i> Tablet Optimized</div>
                    <div class="badge"><i class="fas fa-desktop"></i> PC Compatible</div>
                    <div class="badge"><i class="fas fa-bolt"></i> Fast Loading</div>
                </div>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="bio">Bio Generator</div>
                <div class="tab" data-tab="username">Username Finder</div>
                <div class="tab" data-tab="hashtags">Hashtag Generator</div>
                <div class="tab" data-tab="templates">Bio Templates</div>
                <div class="tab" data-tab="saved">Saved Items</div>
            </div>
            
            <!-- Bio Generator Tab -->
            <div class="tab-content active" id="bio-tab">
                <div class="form-group">
                    <label for="bio-keywords">Describe your personality or brand</label>
                    <input type="text" id="bio-keywords" placeholder="e.g., Travel blogger, fitness enthusiast, fashion lover">
                </div>
                
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="bio-style">Style</label>
                        <select id="bio-style">
                            <option value="aesthetic">Aesthetic</option>
                            <option value="funny">Funny</option>
                            <option value="professional">Professional</option>
                            <option value="minimalist">Minimalist</option>
                            <option value="gamer">Gamer</option>
                            <option value="influencer">Influencer</option>
                            <option value="creative">Creative</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="bio-language">Language</label>
                        <select id="bio-language">
                            <option value="english">English</option>
                            <option value="hindi">Hindi</option>
                            <option value="spanish">Spanish</option>
                            <option value="french">French</option>
                            <option value="german">German</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="bio-emoji">Emoji Style</label>
                        <select id="bio-emoji">
                            <option value="none">No emojis</option>
                            <option value="some">Some emojis</option>
                            <option value="lots">Lots of emojis</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="bio-links">Include Social Links</label>
                        <select id="bio-links">
                            <option value="no">No links</option>
                            <option value="youtube">YouTube</option>
                            <option value="tiktok">TikTok</option>
                            <option value="website">Website</option>
                            <option value="all">All my links</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn" id="generate-bio"><i class="fas fa-magic"></i> Generate Bio</button>
                
                <div class="loading" id="bio-loading">
                    <div class="spinner"></div>
                    <p>Generating your perfect bio...</p>
                </div>
                
                <div class="result-container" id="bio-result" style="display: none;">
                    <h3 class="result-title"><i class="fas fa-quote-left"></i> Your Generated Bio</h3>
                    <div class="result-content" id="bio-result-content"></div>
                    <div class="char-counter"><span id="bio-char-count">0</span>/150 characters</div>
                    <div class="action-buttons">
                        <button class="copy-btn" id="copy-bio"><i class="fas fa-copy"></i> Copy Bio</button>
                        <button class="save-btn" id="save-bio"><i class="fas fa-bookmark"></i> Save Bio</button>
                        <button class="refresh-btn" id="refresh-bio"><i class="fas fa-sync-alt"></i> Regenerate</button>
                    </div>
                </div>
            </div>
            
            <!-- Username Finder Tab -->
            <div class="tab-content" id="username-tab">
                <div class="form-group">
                    <label for="username-keywords">Keywords for your username</label>
                    <input type="text" id="username-keywords" placeholder="e.g., Travel, food, tech">
                </div>
                
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="username-style">Style</label>
                        <select id="username-style">
                            <option value="cool">Cool</option>
                            <option value="clever">Clever</option>
                            <option value="aesthetic">Aesthetic</option>
                            <option value="funny">Funny</option>
                            <option value="professional">Professional</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="username-length">Length</label>
                        <select id="username-length">
                            <option value="short">Short (4-8 chars)</option>
                            <option value="medium" selected>Medium (8-12 chars)</option>
                            <option value="long">Long (12-16 chars)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="username-numbers">Include Numbers</label>
                    <select id="username-numbers">
                        <option value="no">No numbers</option>
                        <option value="yes">Yes, add numbers</option>
                        <option value="maybe">Maybe if needed</option>
                    </select>
                </div>
                
                <button class="btn" id="generate-username"><i class="fas fa-user"></i> Generate Username</button>
                <button class="btn btn-secondary" id="check-availability"><i class="fas fa-check-circle"></i> Check Availability</button>
                
                <div class="loading" id="username-loading">
                    <div class="spinner"></div>
                    <p>Finding the perfect username...</p>
                </div>
                
                <div class="result-container" id="username-result" style="display: none;">
                    <h3 class="result-title"><i class="fas fa-at"></i> Suggested Usernames</h3>
                    <div class="result-content" id="username-result-content"></div>
                    <div class="action-buttons">
                        <button class="copy-btn" id="copy-username"><i class="fas fa-copy"></i> Copy Username</button>
                        <button class="save-btn" id="save-username"><i class="fas fa-bookmark"></i> Save Username</button>
                        <button class="refresh-btn" id="refresh-username"><i class="fas fa-sync-alt"></i> Get More</button>
                    </div>
                </div>
            </div>
            
            <!-- Hashtag Generator Tab -->
            <div class="tab-content" id="hashtags-tab">
                <div class="form-group">
                    <label for="hashtag-keywords">Describe your post/content</label>
                    <input type="text" id="hashtag-keywords" placeholder="e.g., Beach sunset, fitness workout, fashion style">
                </div>
                
                <div class="form-group">
                    <label for="hashtag-amount">Number of Hashtags</label>
                    <select id="hashtag-amount">
                        <option value="5">5 hashtags</option>
                        <option value="10" selected>10 hashtags</option>
                        <option value="15">15 hashtags</option>
                        <option value="20">20 hashtags</option>
                        <option value="30">30 hashtags</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="hashtag-popularity">Popularity Level</label>
                    <select id="hashtag-popularity">
                        <option value="mix">Mix of popular and niche</option>
                        <option value="popular">Mostly popular</option>
                        <option value="niche">Mostly niche</option>
                    </select>
                </div>
                
                <button class="btn" id="generate-hashtags"><i class="fas fa-hashtag"></i> Generate Hashtags</button>
                
                <div class="loading" id="hashtags-loading">
                    <div class="spinner"></div>
                    <p>Generating perfect hashtags...</p>
                </div>
                
                <div class="result-container" id="hashtags-result" style="display: none;">
                    <h3 class="result-title"><i class="fas fa-hashtag"></i> Recommended Hashtags</h3>
                    <div class="result-content" id="hashtags-result-content"></div>
                    <div class="action-buttons">
                        <button class="copy-btn" id="copy-hashtags"><i class="fas fa-copy"></i> Copy Hashtags</button>
                        <button class="save-btn" id="save-hashtags"><i class="fas fa-bookmark"></i> Save Hashtags</button>
                    </div>
                </div>
            </div>
            
            <!-- Bio Templates Tab -->
            <div class="tab-content" id="templates-tab">
                <div class="form-group">
                    <label for="template-category">Filter Templates</label>
                    <select id="template-category">
                        <option value="all">All Categories</option>
                        <option value="influencer">Influencer</option>
                        <option value="business">Business</option>
                        <option value="personal">Personal</option>
                        <option value="creative">Creative</option>
                        <option value="minimalist">Minimalist</option>
                    </select>
                </div>
                
                <div class="template-grid" id="templates-grid">
                    <!-- Templates will be loaded here -->
                </div>
            </div>
            
            <!-- Saved Items Tab -->
            <div class="tab-content" id="saved-tab">
                <div class="saved-items-container" id="saved-items">
                    <p>No saved items yet. Generate some bios or usernames and save them here!</p>
                </div>
            </div>
        </div>
        
        <!-- Bottom Banner Ad Space -->
        <div class="ad-container top-banner-ad">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <footer>
            <p>Powered by OpenRouter AI | InstaGen Pro Â© 2025 | <a href="#" style="color: var(--accent);">Terms</a> | <a href="#" style="color: var(--accent);">Privacy</a></p>
        </footer>
    </div>

    <!-- Google AdMob Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
     crossorigin="anonymous"></script>
    
    <script>
        // Dark Mode Toggle
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        });
        
        // Tab switching functionality
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and content
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-tab`).classList.add('active');
                
                // Refresh ads when switching tabs
                setTimeout(() => {
                    if (window.adsbygoogle) {
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    }
                }, 300);
            });
        });
        
        // Initialize saved items from localStorage
        let savedItems = JSON.parse(localStorage.getItem('instagen-saved-items')) || [];
        renderSavedItems();
        
        // Generate Bio function
        document.getElementById('generate-bio').addEventListener('click', generateBio);
        document.getElementById('refresh-bio').addEventListener('click', generateBio);
        
        async function generateBio() {
            const keywords = document.getElementById('bio-keywords').value.trim();
            const style = document.getElementById('bio-style').value;
            const emoji = document.getElementById('bio-emoji').value;
            const language = document.getElementById('bio-language').value;
            const links = document.getElementById('bio-links').value;
            
            if (!keywords) {
                alert('Please describe your personality or brand');
                return;
            }
            
            // Show loading
            document.getElementById('bio-loading').style.display = 'block';
            document.getElementById('bio-result').style.display = 'none';
            
            try {
                // Prepare the prompt for AI
                let prompt = `Generate an Instagram bio for someone who is ${keywords}. Make it ${style} style.`;
                
                if (emoji === 'some') {
                    prompt += ' Use a few relevant emojis.';
                } else if (emoji === 'lots') {
                    prompt += ' Use plenty of emojis throughout the bio.';
                }
                
                if (language !== 'english') {
                    prompt += ` Write the bio in ${language}.`;
                }
                
                if (links !== 'no') {
                    prompt += ` Include ${links === 'all' ? 'all social media links' : links + ' link'} placeholder with "[link]" text.`;
                }
                
                // Call OpenRouter API
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer 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",
                        "HTTP-Referer": window.location.href,
                        "X-Title": "InstaGen Bio Generator",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "model": "deepseek/deepseek-chat-v3-0324:free",
                        "messages": [
                            {
                                "role": "user",
                                "content": prompt
                            }
                        ]
                    })
                });
                
                const data = await response.json();
                const bioContent = data.choices[0].message.content;
                
                // Display result
                document.getElementById('bio-result-content').textContent = bioContent;
                document.getElementById('bio-result').style.display = 'block';
                
                // Update character count
                updateCharCount(bioContent, 'bio-char-count');
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('bio-result-content').textContent = 'Sorry, there was an error generating your bio. Please try again.';
                document.getElementById('bio-result').style.display = 'block';
            } finally {
                document.getElementById('bio-loading').style.display = 'none';
            }
        }
        
        // Generate Username function
        document.getElementById('generate-username').addEventListener('click', generateUsername);
        document.getElementById('refresh-username').addEventListener('click', generateUsername);
        
        async function generateUsername() {
            const keywords = document.getElementById('username-keywords').value.trim();
            const style = document.getElementById('username-style').value;
            const length = document.getElementById('username-length').value;
            const numbers = document.getElementById('username-numbers').value;
            
            if (!keywords) {
                alert('Please enter some keywords for your username');
                return;
            }
            
            // Show loading
            document.getElementById('username-loading').style.display = 'block';
            document.getElementById('username-result').style.display = 'none';
            
            try {
                // Prepare the prompt for AI
                let prompt = `Generate 5 creative Instagram username suggestions based on these keywords: ${keywords}. `;
                prompt += `Make them ${style} in style and ${length} in length. `;
                
                if (numbers === 'yes') {
                    prompt += 'Include numbers in the usernames. ';
                } else if (numbers === 'maybe') {
                    prompt += 'You can include numbers if they make the username better. ';
                } else {
                    prompt += 'Do not include numbers in the usernames. ';
                }
                
                prompt += `Format the usernames as a numbered list without any additional text.`;
                
                // Call OpenRouter API
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer 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",
                        "HTTP-Referer": window.location.href,
                        "X-Title": "InstaGen Username Finder",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "model": "deepseek/deepseek-chat-v3-0324:free",
                        "messages": [
                            {
                                "role": "user",
                                "content": prompt
                            }
                        ]
                    })
                });
                
                const data = await response.json();
                
                // Display result
                document.getElementById('username-result-content').textContent = data.choices[0].message.content;
                document.getElementById('username-result').style.display = 'block';
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('username-result-content').textContent = 'Sorry, there was an error generating usernames. Please try again.';
                document.getElementById('username-result').style.display = 'block';
            } finally {
                document.getElementById('username-loading').style.display = 'none';
            }
        }
        
        // Check Username Availability (mock function)
        document.getElementById('check-availability').addEventListener('click', async function() {
            const usernameContent = document.getElementById('username-result-content').textContent;
            if (!usernameContent) {
                alert('Please generate some usernames first');
                return;
            }
            
            // This is a mock implementation - in a real app you would need to call Instagram's API
            // or use a web scraping service to check username availability
            const usernames = usernameContent.split('\n').filter(line => line.trim().length > 0);
            
            let availabilityResults = [];
            for (const usernameLine of usernames) {
                // Extract just the username part (remove numbers and dots)
                const username = usernameLine.replace(/^\d+\.\s*/, '').trim();
                if (username) {
                    // Mock availability check (random for demo)
                    const isAvailable = Math.random() > 0.7;
                    availabilityResults.push({
                        username,
                        available: isAvailable
                    });
                }
            }
            
            // Update the display with availability info
            let newContent = '';
            availabilityResults.forEach(result => {
                newContent += `${result.username} - ${result.available ? 'âœ… Available' : 'âŒ Taken'}\n`;
            });
            
            document.getElementById('username-result-content').textContent = newContent;
        });
        
        // Generate Hashtags function
        document.getElementById('generate-hashtags').addEventListener('click', async function() {
            const keywords = document.getElementById('hashtag-keywords').value.trim();
            const amount = document.getElementById('hashtag-amount').value;
            const popularity = document.getElementById('hashtag-popularity').value;
            
            if (!keywords) {
                alert('Please describe your post/content');
                return;
            }
            
            // Show loading
            document.getElementById('hashtags-loading').style.display = 'block';
            document.getElementById('hashtags-result').style.display = 'none';
            
            try {
                // Prepare the prompt for AI
                let prompt = `Generate ${amount} Instagram hashtags for a post about ${keywords}. `;
                
                if (popularity === 'popular') {
                    prompt += 'Focus on popular, high-traffic hashtags. ';
                } else if (popularity === 'niche') {
                    prompt += 'Focus on niche, specific hashtags with less competition. ';
                } else {
                    prompt += 'Provide a mix of popular and niche hashtags. ';
                }
                
                prompt += 'Format the hashtags as a comma-separated list without any additional text.';
                
                // Call OpenRouter API
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer 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",
                        "HTTP-Referer": window.location.href,
                        "X-Title": "InstaGen Hashtag Generator",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "model": "deepseek/deepseek-chat-v3-0324:free",
                        "messages": [
                            {
                                "role": "user",
                                "content": prompt
                            }
                        ]
                    })
                });
                
                const data = await response.json();
                
                // Display result
                document.getElementById('hashtags-result-content').textContent = data.choices[0].message.content;
                document.getElementById('hashtags-result').style.display = 'block';
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('hashtags-result-content').textContent = 'Sorry, there was an error generating hashtags. Please try again.';
                document.getElementById('hashtags-result').style.display = 'block';
            } finally {
                document.getElementById('hashtags-loading').style.display = 'none';
            }
        });
        
        // Load Bio Templates
        const templates = [
            {
                title: "Travel Influencer",
                content: "âœˆï¸ Exploring the world one city at a time\nðŸŒ 42 countries & counting\nðŸ“¸ Capturing moments that last forever\nðŸ‘‡ Check out my travel guides",
                category: "influencer"
            },
            {
                title: "Fitness Coach",
                content: "ðŸ’ª Certified personal trainer\nðŸ”¥ Helping you build your dream body\nðŸ“© DM for online coaching\n#FitnessMotivation",
                category: "business"
            },
            {
                title: "Minimalist Lifestyle",
                content: "Less is more âœ¨\nLiving intentionally\nFinding joy in simplicity\nMinimalism | Mindfulness | Slow living",
                category: "minimalist"
            },
            {
                title: "Food Blogger",
                content: "ðŸ´ Food enthusiast & recipe developer\nðŸ“· Food photography tips\nðŸ‘‡ Check my bio link for recipes\n#Foodie #HomeChef",
                category: "creative"
            },
            {
                title: "Professional Photographer",
                content: "ðŸ“· Portrait & wedding photographer\nðŸ“ Based in [Your City]\nðŸ“© Bookings: hello@yourwebsite.com\nâœ¨ Capturing your special moments",
                category: "business"
            },
            {
                title: "Personal Blog",
                content: "Just a [your personality] sharing my journey\nðŸ’­ Thoughts | ðŸ“š Books | ðŸŽµ Music\nLiving life one day at a time âœ¨",
                category: "personal"
            }
        ];
        
        function renderTemplates(category = 'all') {
            const templatesGrid = document.getElementById('templates-grid');
            templatesGrid.innerHTML = '';
            
            const filteredTemplates = category === 'all' 
                ? templates 
                : templates.filter(t => t.category === category);
            
            if (filteredTemplates.length === 0) {
                templatesGrid.innerHTML = '<p>No templates found in this category.</p>';
                return;
            }
            
            filteredTemplates.forEach(template => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card';
                templateCard.innerHTML = `
                    <div class="template-title">${template.title}</div>
                    <div class="template-content">${template.content}</div>
                `;
                
                templateCard.addEventListener('click', () => {
                    document.getElementById('bio-keywords').value = template.title;
                    document.getElementById('bio-result-content').textContent = template.content;
                    document.getElementById('bio-result').style.display = 'block';
                    updateCharCount(template.content, 'bio-char-count');
                    
                    // Switch to bio tab
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    document.querySelector('.tab[data-tab="bio"]').classList.add('active');
                    document.getElementById('bio-tab').classList.add('active');
                });
                
                templatesGrid.appendChild(templateCard);
            });
        }
        
        // Filter templates by category
        document.getElementById('template-category').addEventListener('change', function() {
            renderTemplates(this.value);
        });
        
        // Initial template render
        renderTemplates();
        
        // Save Bio function
        document.getElementById('save-bio').addEventListener('click', function() {
            const bioContent = document.getElementById('bio-result-content').textContent;
            if (!bioContent || bioContent.includes('Sorry, there was an error')) {
                alert('Nothing to save or error in content');
                return;
            }
            
            const keywords = document.getElementById('bio-keywords').value.trim() || 'Untitled Bio';
            
            savedItems.push({
                type: 'bio',
                title: keywords,
                content: bioContent,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem('instagen-saved-items', JSON.stringify(savedItems));
            renderSavedItems();
            
            const btn = document.getElementById('save-bio');
            btn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-bookmark"></i> Save Bio';
            }, 2000);
        });
        
        // Save Username function
        document.getElementById('save-username').addEventListener('click', function() {
            const usernameContent = document.getElementById('username-result-content').textContent;
            if (!usernameContent || usernameContent.includes('Sorry, there was an error')) {
                alert('Nothing to save or error in content');
                return;
            }
            
            const keywords = document.getElementById('username-keywords').value.trim() || 'Username Ideas';
            
            savedItems.push({
                type: 'username',
                title: keywords,
                content: usernameContent,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem('instagen-saved-items', JSON.stringify(savedItems));
            renderSavedItems();
            
            const btn = document.getElementById('save-username');
            btn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-bookmark"></i> Save Username';
            }, 2000);
        });
        
        // Save Hashtags function
        document.getElementById('save-hashtags').addEventListener('click', function() {
            const hashtagsContent = document.getElementById('hashtags-result-content').textContent;
            if (!hashtagsContent || hashtagsContent.includes('Sorry, there was an error')) {
                alert('Nothing to save or error in content');
                return;
            }
            
            const keywords = document.getElementById('hashtag-keywords').value.trim() || 'Hashtag Ideas';
            
            savedItems.push({
                type: 'hashtags',
                title: keywords,
                content: hashtagsContent,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem('instagen-saved-items', JSON.stringify(savedItems));
            renderSavedItems();
            
            const btn = document.getElementById('save-hashtags');
            btn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-bookmark"></i> Save Hashtags';
            }, 2000);
        });
        
        // Render saved items
        function renderSavedItems() {
            const savedItemsContainer = document.getElementById('saved-items');
            
            if (savedItems.length === 0) {
                savedItemsContainer.innerHTML = '<p>No saved items yet. Generate some bios or usernames and save them here!</p>';
                return;
            }
            
            savedItemsContainer.innerHTML = '';
            
            // Sort by most recent first
            const sortedItems = [...savedItems].sort((a, b) => 
                new Date(b.timestamp) - new Date(a.timestamp));
            
            sortedItems.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'saved-item';
                
                let icon = '';
                if (item.type === 'bio') icon = '<i class="fas fa-quote-left"></i>';
                else if (item.type === 'username') icon = '<i class="fas fa-at"></i>';
                else if (item.type === 'hashtags') icon = '<i class="fas fa-hashtag"></i>';
                
                itemEl.innerHTML = `
                    <div class="saved-item-content">
                        <div><strong>${icon} ${item.title}</strong></div>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gray);">${new Date(item.timestamp).toLocaleString()}</div>
                        <div style="margin-top: 0.5rem; white-space: pre-line;">${item.content}</div>
                    </div>
                    <div class="saved-item-actions">
                        <button class="copy-btn" data-index="${index}"><i class="fas fa-copy"></i></button>
                        <button class="copy-btn" data-index="${index}" data-action="delete"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                
                savedItemsContainer.appendChild(itemEl);
            });
            
            // Add event listeners for copy and delete buttons
            document.querySelectorAll('.saved-item-actions button').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'delete') {
                        savedItems.splice(index, 1);
                        localStorage.setItem('instagen-saved-items', JSON.stringify(savedItems));
                        renderSavedItems();
                    } else {
                        const content = savedItems[index].content;
                        navigator.clipboard.writeText(content).then(() => {
                            const originalText = this.innerHTML;
                            this.innerHTML = '<i class="fas fa-check"></i>';
                            setTimeout(() => {
                                this.innerHTML = originalText;
                            }, 2000);
                        });
                    }
                });
            });
        }
        
        // Copy buttons
        document.getElementById('copy-bio').addEventListener('click', () => {
            const bioContent = document.getElementById('bio-result-content').textContent;
            copyToClipboard(bioContent, 'copy-bio');
        });
        
        document.getElementById('copy-username').addEventListener('click', () => {
            const usernameContent = document.getElementById('username-result-content').textContent;
            copyToClipboard(usernameContent, 'copy-username');
        });
        
        document.getElementById('copy-hashtags').addEventListener('click', () => {
            const hashtagsContent = document.getElementById('hashtags-result-content').textContent;
            copyToClipboard(hashtagsContent, 'copy-hashtags');
        });
        
        function copyToClipboard(text, buttonId) {
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.getElementById(buttonId);
                btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    if (buttonId === 'copy-bio') btn.innerHTML = '<i class="fas fa-copy"></i> Copy Bio';
                    else if (buttonId === 'copy-username') btn.innerHTML = '<i class="fas fa-copy"></i> Copy Username';
                    else if (buttonId === 'copy-hashtags') btn.innerHTML = '<i class="fas fa-copy"></i> Copy Hashtags';
                }, 2000);
            });
        }
        
        // Character counter for bio
        function updateCharCount(text, elementId) {
            const count = text.length;
            const counter = document.getElementById(elementId);
            counter.textContent = count;
            
            // Update counter color based on length
            counter.className = 'char-counter';
            if (count > 130) counter.classList.add('warning');
            if (count > 150) counter.classList.add('error');
        }
        
        // Initialize with dark mode preference if set
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark-mode');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        // Initialize AdMob ads
        document.addEventListener('DOMContentLoaded', function() {
            // Ads are automatically loaded by the script
            // You can add additional ad control logic here if needed
        });
    </script>
</body>
</html>
